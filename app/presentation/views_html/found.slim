doctype html
html
  head
    title Image preview on realtime
    meta http-equiv="Content-Type" content="text/html; charset=UTF-8"
    script src="https://libs.baidu.com/jquery/1.9.0/jquery.js"
  body
    legend
      | Upload the lost animal picture and recommend some vets for you !!

    form name="form0" action="found" id="form0" enctype="multipart/form-data"
      label for="picture_description" Where do you find this cat(dog) ?
      input type="text" name="location" id="file0"
      br
      label for="top_n_vets" How many results of vets?
      input type="text" name="number" id="vets"
      br
      input type="file" name="file0" id="file0" multiple="multiple"
      br
      img src="" id="img0"
      br
      button type="button" id="submitBtn" onclick="submitForm()">Submit
    

    javascript:
      $("#file0").change(function(){
          var objUrl = getObjectURL(this.files[0]);
          console.log("objUrl = "+objUrl);
          if (objUrl) {
              $("#img0").attr("src", objUrl);
          }
      });

      
      function getObjectURL(file) {
          var url = null ; 
          if (window.createObjectURL!=undefined) { // basic
              url = window.createObjectURL(file);
          } else if (window.URL!=undefined) { // mozilla(firefox)
              url = window.URL.createObjectURL(file);
          } else if (window.webkitURL!=undefined) { // webkit or chrome
              url = window.webkitURL.createObjectURL(file);
          }
          return url;
      }

      function submitForm() {
          var formData = new FormData($("#form0")[0]);
          $.ajax({
              type: 'POST',
              url: '/found',
              data: formData,
              processData: false,
              contentType: false,
              success: function(response) {

                var outputText = $(response).find('#output').text();
                
                $("#output").text(outputText);
              },
              error: function(error) {
                  console.log('Error:', error);
              }
          });
      }
    
    - if output
      p#output= output.image
    - else
      p#output No output available
